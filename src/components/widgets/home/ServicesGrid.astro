---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import { Icon } from 'astro-icon/components';

const { id, isDark = false, classes = {}, bg = await Astro.slots.render('bg') } = Astro.props;

interface ServiceItem {
  title: string;
  description: string;
  icon?: string;
  image?: string;
  colSpan?: string;
  bgClass?: string;
}

const services: ServiceItem[] = [
  {
    title: 'AI + Engineering',
    description:
      'We create custom, production-ready AI — not demos — with solid MLOps, reliable inference, and features that drive real business impact.',
    colSpan: 'md:col-span-1',
    bgClass: 'bg-blue-50/50',
    image: 'https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=1000&auto=format&fit=crop', // Blue Tech
  },
  {
    title: 'Custom Software',
    description:
      'Custom systems for your workflows — reliable APIs, dashboards, and integration that drive your business.',
    colSpan: 'md:col-span-2',
    bgClass: 'bg-gray-100/50',
    image: 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=1000&auto=format&fit=crop', // Dashboard
  },
  {
    title: 'Blockchain Engineering',
    description:
      'Secure, product-driven smart contracts, tokens, and dApps — deployed on the chains that fit your goals.',
    colSpan: 'md:col-span-1',
    bgClass: 'bg-green-50/50',
  },
  {
    title: 'Mobile App Development',
    description:
      'Pixel-perfect UX, great performance, and quick launch. We build apps that feel delightful, integrate cleanly, and evolve with data.',
    colSpan: 'md:col-span-1',
    bgClass: 'bg-yellow-50/50',
  },
  {
    title: 'Cloud & Ops',
    description: 'Reliable, efficient cloud infrastructure that makes ops boring and teams fast.',
    colSpan: 'md:col-span-2',
    bgClass: 'bg-purple-50/50',
    image: 'https://images.unsplash.com/photo-1558494949-efc02584299b?q=80&w=1000&auto=format&fit=crop', // Servers
  },
];
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
  <div class="mb-12">
    <h2 class="text-4xl md:text-5xl font-bold font-serif mb-4">
      Own the <span class="italic font-normal">digital frontier</span>
    </h2>
    <p class="text-muted text-lg max-w-2xl">
      Fed up with playing catch-up? We build bold, practical tech that turns ideas into impact — from clever AI that
      actually works to rock-solid systems that scale.
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    {
      services.map((item, index) => (
        <div
          class={`relative group rounded-2xl overflow-hidden p-8 transition-all hover:shadow-lg ${item.bgClass} ${item.colSpan}`}
        >
          {item.image && (
            <div
              class={
                index === 0 || index === 4
                  ? 'mb-6 h-48 w-full overflow-hidden rounded-xl'
                  : 'absolute right-0 top-0 bottom-0 w-1/3 opacity-20'
              }
            >
              {index === 0 || index === 4 ? (
                <img
                  src={item.image}
                  alt={item.title}
                  class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                />
              ) : (
                index === 1 && <img src={item.image} alt={item.title} class="w-full h-full object-cover object-left" />
              )}
            </div>
          )}

          <div class="relative z-10 flex flex-col items-start h-full">
            <h3 class="text-2xl font-bold mb-3 font-serif">
              {item.title.includes(' ') ? (
                <>
                  {item.title.split(' ')[0]}
                  <span class="italic font-normal font-serif">{item.title.substring(item.title.indexOf(' ') + 1)}</span>
                </>
              ) : (
                item.title
              )}
            </h3>
            <p class="text-muted text-sm mb-6 flex-grow">{item.description}</p>
            <a
              href="#"
              class="font-bold text-sm text-heading hover:text-primary transition-colors inline-flex items-center"
            >
              Know more <Icon name="tabler:arrow-right" class="w-4 h-4 ml-1" />
            </a>
          </div>
        </div>
      ))
    }
  </div>
</WidgetWrapper>
